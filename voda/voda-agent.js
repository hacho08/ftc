!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VodaAgent",[],t):"object"==typeof exports?exports.VodaAgent=t():e.VodaAgent=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist",n(n.s=16)}([function(e,t,n){"use strict";var r=n(6),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===o.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:s,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)u(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,o=arguments.length;r<o;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(1),o=n(20),i=n(22),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,u,l,h,d,f,p=0,g=!1,m=!1,_=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=c,r=u;return c=u=void 0,p=t,h=e.apply(r,n)}function y(e){return p=e,d=setTimeout(w,t),g?v(e):h}function b(e){var n=e-f;return void 0===f||n>=t||n<0||m&&e-p>=l}function w(){var e=o();if(b(e))return S(e);d=setTimeout(w,function(e){var n=t-(e-f);return m?a(n,l-(e-p)):n}(e))}function S(e){return d=void 0,_&&c?v(e):(c=u=void 0,h)}function k(){var e=o(),n=b(e);if(c=arguments,u=this,f=e,n){if(void 0===d)return y(f);if(m)return clearTimeout(d),d=setTimeout(w,t),v(f)}return void 0===d&&(d=setTimeout(w,t)),h}return t=i(t)||0,r(n)&&(g=!!n.leading,l=(m="maxWait"in n)?s(i(n.maxWait)||0,t):l,_="trailing"in n?!!n.trailing:_),k.cancel=function(){void 0!==d&&clearTimeout(d),p=0,c=f=u=d=void 0},k.flush=function(){return void 0===d?h:S(o())},k}},function(e,t,n){var r=n(21),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(3).Symbol;e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(0);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(0),o=n(38),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=n(11)),a),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(i)})),e.exports=c}).call(this,n(10))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(0),o=n(39),i=n(7),s=n(41),a=n(44),c=n(45),u=n(12);e.exports=function(e){return new Promise((function(t,l){var h=e.data,d=e.headers;r.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",g=e.auth.password||"";d.Authorization="Basic "+btoa(p+":"+g)}var m=s(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),i(m,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};o(t,l,r),f=null}},f.onabort=function(){f&&(l(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){l(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(u(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var _=n(46),v=(e.withCredentials||c(m))&&e.xsrfCookieName?_.read(e.xsrfCookieName):void 0;v&&(d[e.xsrfHeaderName]=v)}if("setRequestHeader"in f&&r.forEach(d,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),l(e),f=null)})),void 0===h&&(h=null),f.send(h)}))}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e,t,n,o,i){var s=new Error(e);return r(s,t,n,o,i)}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){t=t||{};var n={},o=["url","method","params","data"],i=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(o,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(i,(function(o){r.isObject(t[o])?n[o]=r.deepMerge(e[o],t[o]):void 0!==t[o]?n[o]=t[o]:r.isObject(e[o])?n[o]=r.deepMerge(e[o]):void 0!==e[o]&&(n[o]=e[o])})),r.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var a=o.concat(i).concat(s),c=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(2),o=n(1);e.exports=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:i,maxWait:t,trailing:s})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(17);!function(e){var t=function(){(new o.aivoryAgent).enableScrapper()};e.init=t}(r||(r={}));new r.init},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.aivoryAgent=void 0;var o=r(n(18)),i=n(19),s=n(52),a=n(55),c=function e(){var t=this;if(this.setIsSendingMessage=function(e){t.isSendingMessage=e},this.getIsSendingMessage=function(){return t.isSendingMessage},this.enableScrapper=function(){if(!o.default(navigator.userAgent)){var e=new i.PageView,n=new s.ClickTouch,r=new a.SocketClient;r.initSocketClient(),e.enableLoadEvent(r),n.enableClickTouch(r,e,t.setIsSendingMessage,t.getIsSendingMessage)}},this.top=0,this.bottom=0,e._instance)return e._instance;e._instance=this,this.isSendingMessage=!1};t.aivoryAgent=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,s(e,t,"get"))}function i(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,s(e,t,"set"),n),n}function s(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function a(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function c(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function u(e,t,n){c(e,t),t.set(e,n)}function l(e,t){c(e,t),t.add(e)}n.r(t),n.d(t,"default",(function(){return v}));var h=[" daum[\\s/]"," deusu/","(?:^|\\s)site","@[a-z]","\\(at\\)[a-z]","\\(github\\.com/","\\[at\\][a-z]","^12345","^<","^[\\w\\s\\.]+/v?\\d+(\\.\\d+)?(\\.\\d{1,10})?$","^[\\w]+$","^ace explorer","^acoon","^active","^ad muncher","^anglesharp/","^anonymous","^apple-pubsub/","^astute srm","^avsdevicesdk/","^axios/","^bidtellect/","^biglotron","^blackboard safeassign","^blocknote.net","^braze sender","^camo asset proxy","^captivenetworksupport","^castro","^clamav[\\s/]","^cobweb/","^coccoc","^dap ","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^enigma browser","^evernote clip resolver","^facebook","^faraday","^fdm[\\s/]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^infox-wisg","^invision","^jeode/","^jetbrains","^jetty/","^jigsaw","^linkdex","^lwp[-:\\s]","^mailchimp\\.com$","^metauri","^microsoft bits","^microsoft data","^microsoft office existence","^microsoft office protocol discovery","^microsoft windows network diagnostics","^microsoft-cryptoapi","^microsoft-webdav-miniredir","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^my browser$","^navermailapp","^netsurf","^node-superagent","^octopus","^offline explorer","^ossproxy","^pagething","^panscient","^perimeterx","^php","^postrank","^python","^ramblermail","^read","^reed","^restsharp/","^shareaza","^shockwave flash","^smallproxy","^snapchat","^space bison","^sprinklr","^svn","^swcd ","^t-online browser","^taringa","^test certificate info","^the knowledge ai","^thinklab","^thumbor/","^traackr.com","^tumblr/","^vbulletin","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^www-mechanize","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zeushdthree","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","bot","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","client","cloud","crawl","daemon","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","email","evc-batch/","feed","fetch","firephp","freesafeip","ghost","gomezagent","google","headlesschrome/","http","httrack","hubspot marketing grader","hydra","ibisbrowser","images","index","ips-agent","java","jorgee","library","mail\\.ru/","manager","monitor","neustar wpm","news","nutch","offbyone","optimize","pagespeed","parse","perl","phantom","pingdom","powermarks","preview","probe","ptst[\\s/]\\d","reader","rigor","rss","scan","scrape","search","server","sogou","sparkler/","spider","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","toolbar","torrent","tracemyfile","transcoder","trendsmapresolver","twingly recon","url","valid","virtuoso","wappalyzer","webglance","webkit2png","websitemetadataretriever","whatcms/","wordpress","zgrab"];!function(e){try{new RegExp("(?<! cu)bot").test("dangerbot")}catch(t){return e}e.splice(e.lastIndexOf("bot"),1),e.push("(?<! cu)bot"),e.splice(e.lastIndexOf("google"),1),e.push("(?<! (channel\\/|google\\/))google(?!(app|\\/google))"),e.splice(e.lastIndexOf("search"),1),e.push("(?<! (ya|yandex))search"),e.splice(e.lastIndexOf("http"),1),e.push("(?<!(lib))http"),e.splice(e.lastIndexOf("java"),1),e.push("java(?!;)"),e.splice(e.lastIndexOf("fetch"),1),e.push("(?<!(mozac))fetch")}(h);var d=new WeakMap,f=new WeakMap,p=new WeakSet,g=new WeakSet;function m(){i(this,f,new RegExp(o(this,d).join("|"),"i"))}function _(e){return o(this,d).indexOf(e.toLowerCase())}var v=new(function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,g),l(this,p),u(this,d,{writable:!0,value:void 0}),u(this,f,{writable:!0,value:void 0}),i(this,d,t||h.slice()),a(this,p,m).call(this);return Object.defineProperties((function(e){return n.test(e)}),Object.getOwnPropertyNames(e.prototype).filter((function(e){return!["constructor"].includes(e)})).reduce((function(e,t){return Object.assign(e,(i={get:function(){return n[t].bind(n)}},(o=t)in(r={})?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r));var r,o,i}),{}))}var t,n,s;return t=e,(n=[{key:"test",value:function(e){return Boolean(e)&&o(this,f).test(e)}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(o(this,f));return t&&t[0]}},{key:"matches",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o(this,d).filter((function(t){return new RegExp(t,"i").test(e)}))}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.exclude(this.matches(e))}},{key:"extend",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];[].push.apply(o(this,d),t.filter((function(t){return-1===a(e,g,_).call(e,t)})).map((function(e){return e.toLowerCase()}))),a(this,p,m).call(this)}},{key:"exclude",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length;t--;){var n=a(this,g,_).call(this,e[t]);n>-1&&o(this,d).splice(n,1)}a(this,p,m).call(this)}},{key:"spawn",value:function(t){return new e(t||o(this,d))}}])&&r(t.prototype,n),s&&r(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}())},function(e,t,n){"use strict";var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PageView=void 0;var s=n(56),a=i(n(2)),c=n(30),u=n(51),l=function(){function e(){var t=this;this.hasCookie=function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},this.pageViewPostAPI=function(e,n,r,o,i){var s=t;return new Promise((function(t,a){t(s.rawDataScrapper.generateRawData(e,n,r,o,i))}))},this.scrollPostAPI=function(){var e=t;return new Promise((function(t,n){var r=e.SocketClientInstance;t(e.rawdataScrapperScroll.generateRawData(r))}))},this.postAPI=function(e,n,i){return r(t,void 0,void 0,(function(){var t,r;return o(this,(function(o){switch(o.label){case 0:if(this.hasCookie("session_key")||this.resetSessionStorage(),void 0===n)n=0;else if(n>1)return[2];(t=new Date).setMinutes(t.getMinutes()+30),sessionStorage.getItem("_voda_exist_test")&&(this.exist=!0),sessionStorage.getItem("_voda_is_click_test")&&(this.prev_click=!0),this.last_url=sessionStorage.getItem("_voda_previous_url_test"),sessionStorage.getItem("_voda_previous_previous_url_test")&&(sessionStorage.getItem("_voda_previous_previous_url_test")!==window.location.href||this.last_url===window.location.href||this.prev_click||(this.rollback=!0)),this.reload||(this.reload=window.location.href===this.last_url),this.last_url&&!this.reload&&sessionStorage.setItem("_voda_previous_previous_url_test",this.last_url),sessionStorage.setItem("_voda_exist_test",!0+""),sessionStorage.getItem("_voda_client_id_test")?(this.initial_refer=sessionStorage.getItem("_voda_first_enter_referrer_test"),this.initial_refer=this.initial_refer&&"null"!==this.initial_refer?this.initial_refer:"",this.reload||this.initial_refer===document.referrer||document.referrer&&""!==document.referrer||(this.initial_refer=document.referrer,this.resetSessionStorage(),this.postAPI(e,++n,!1)),this.client_id=sessionStorage.getItem("_voda_client_id_test"),this.seq=null===sessionStorage.getItem("_voda_current_page_order_number_test")?0:parseInt(sessionStorage.getItem("_voda_current_page_order_number_test")),this.parent_seq=null===sessionStorage.getItem("_voda_previous_page_order_number_test")?0:parseInt(sessionStorage.getItem("_voda_previous_page_order_number_test")),this.rollback?(null===this.seq?this.seq=0:this.seq>0&&this.seq--,this.parent_seq>0&&this.parent_seq--):this.reload||(null===this.seq?this.seq=0:this.seq++,this.parent_seq++),this.ct=sessionStorage.getItem("_voda_current_page_count_test"),this.parent_seq<this.seq&&(this.seq=0)):(this.client_id=s.v4(),sessionStorage.setItem("_voda_first_enter_referrer_test",this.initial_refer)),this.reload?(sessionStorage.getItem("_voda_page_refresh_count_test")&&(this.reload_count=parseInt(sessionStorage.getItem("_voda_page_refresh_count_test"))),this.reload_count++,sessionStorage.setItem("_voda_page_refresh_count_test",this.reload_count+"")):(sessionStorage.removeItem("_voda_page_refresh_count_test"),this.reload_count=0),this.unload_seq=this.seq,this.unload_parent_seq=this.parent_seq,this.url=window.location.href,this.pathname=window.location.pathname,this.title=document.title,this.refer=this.last_url||document.referrer,this.time=(new Date).toISOString(),this.resolution=this.resolution_width+"x"+this.resolution_height,o.label=1;case 1:return o.trys.push([1,7,,8]),this.reload_count>0&&!1===i?[4,this.scrollPostAPI()]:[3,3];case 2:return o.sent(),this.refreshSessionStorage(),sessionStorage.removeItem("_voda_is_click_test"),this.reload=!1,this.rollback=!1,this.prev_click=!1,this.last_url=this.url,[2];case 3:return[4,this.pageViewPostAPI(e,this.refer,this.url,this.resolution,this.title)];case 4:return o.sent(),i?[3,6]:[4,this.scrollPostAPI()];case 5:o.sent(),o.label=6;case 6:return this.refreshSessionStorage(),sessionStorage.removeItem("_voda_is_click_test"),this.reload=!1,this.rollback=!1,this.prev_click=!1,this.last_url=this.url,[3,8];case 7:return r=o.sent(),console.log(r),[3,8];case 8:return[2]}}))}))},this.enableLoadEvent=function(e){t.getRawData(),t.SocketClientInstance=e},e._instance=this,this.rawDataScrapper=new c.RawdataScrapper,this.rawdataScrapperScroll=new u.RawdataScrapperScroll,this.rand=-1,this.exist=!1,this.prev_click=!1,this.last_url=null,this.rollback=!1,this.reload=!1,this.initial_refer=document.referrer,this.client_id=null,this.seq=0,this.parent_seq=0,this.ct=(new Date).toISOString(),this.reload_count=0,this.unload_seq=0,this.unload_parent_seq=0,this.url=null,this.pathname=null,this.title=null,this.refer=document.referrer,this.time=null,this.isSpa=!1,this.samplingRate=100,this.resolution_width=screen.width,this.resolution_height=screen.height,this.resolution=""}return e.prototype.resetSessionStorage=function(){sessionStorage.removeItem("_voda_client_id_test"),sessionStorage.removeItem("_voda_current_page_order_number_test"),sessionStorage.removeItem("_voda_previous_page_order_number_test"),sessionStorage.removeItem("_voda_current_page_count_test"),sessionStorage.removeItem("_voda_previous_url_test"),sessionStorage.removeItem("_voda_previous_previous_url_test"),sessionStorage.removeItem("_voda_page_refresh_count_test"),sessionStorage.removeItem("_voda_first_enter_referrer_test")},e.prototype.refreshSessionStorage=function(){var e=new Date;e.setMinutes(e.getMinutes()+30),sessionStorage.setItem("_voda_client_id_test",this.client_id),sessionStorage.setItem("_voda_current_page_order_number_test",this.seq+""),sessionStorage.setItem("_voda_previous_page_order_number_test",this.parent_seq+""),sessionStorage.setItem("_voda_current_page_count_test",this.ct),sessionStorage.setItem("_voda_previous_url_test",window.location.href),sessionStorage.getItem("_voda_previous_previous_url_test")&&sessionStorage.setItem("_voda_previous_previous_url_test",sessionStorage.getItem("_voda_previous_previous_url_test")),sessionStorage.getItem("_voda_page_refresh_count_test")&&sessionStorage.setItem("_voda_page_refresh_count_test",this.reload_count+""),sessionStorage.getItem("_voda_first_enter_referrer_test")&&sessionStorage.setItem("_voda_first_enter_referrer_test",this.initial_refer)},e.prototype.getFirstClickEventListener=function(){try{var e=function(e){e.type;var t=e.target;if(t.tagName&&"HTML"!==t.tagName){var n=new Date;n.setMinutes(n.getMinutes()+30),sessionStorage.setItem("_voda_is_click_test",!0+"")}};!!document.addEventListener?("ontouchstart"in window?document.addEventListener("touchend",e,!0):(document.addEventListener("click",e,!0),document.addEventListener("mousemove",e,!0)),document.addEventListener("scroll",e,!0)):("ontouchstart"in window?window.addEventListener("touchend",e,!0):(window.addEventListener("click",e,!0),window.addEventListener("mousemove",e,!0)),window.addEventListener("scroll",e,!0))}catch(e){}},e.prototype.getRawData=function(){var e=new Date;if(e.setMinutes(e.getMinutes()+30),sessionStorage.getItem("_voda_uuid_test")?this.rand=parseInt(sessionStorage.getItem("_voda_uuid_test")):this.rand=Math.floor(100*Math.random()),sessionStorage.setItem("_voda_uuid_test",this.rand+""),this.rand>this.samplingRate)return this.resetSessionStorage(),!1;var t=a.default(this.postAPI,500),n=history.pushState,r=history.replaceState;history.pushState=function(){n.apply(history,arguments),setTimeout((function(){try{t(!0,0,!1)}catch(e){}}),500)},history.replaceState=function(){r.apply(history,arguments),setTimeout((function(){try{t(!0,0,!1)}catch(e){}}),500)},window.addEventListener("popstate",(function(){window.dispatchEvent(new Event("locationchange"))})),window.addEventListener("locationchange",(function(){setTimeout((function(){try{t(!0,0,!1)}catch(e){}}),500)}));try{t(!1,0,!1)}catch(e){}this.getFirstClickEventListener()},e}();t.PageView=l},function(e,t,n){var r=n(3);e.exports=function(){return r.Date.now()}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(4))},function(e,t,n){var r=n(23),o=n(1),i=n(25),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?NaN:+e}},function(e,t,n){var r=n(24),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},function(e,t,n){var r=n(26),o=n(29);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(5),o=n(27),i=n(28),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?o(e):i(e)}},function(e,t,n){var r=n(5),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[a]=n:delete e[a]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RawdataScrapper=t.setCookie=void 0;var i=n(31);t.setCookie=function(e,t,n){document.cookie=e+"="+t+";expires="+n+";path=/"};var s=function(){function e(){e._instance=this,this.refer=document.referrer,this.initial_refer=document.referrer,this.last_url=null,this.reload=!1,this.url=null,this.rollback=!1,this.prev_click=!1,this.rootDomain=""}return e.prototype.generateRawData=function(e,n,s,a,c){return r(this,void 0,void 0,(function(){var e,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,i.pageViewEvent(n,s,a,c)];case 1:return e=o.sent(),(r=new Date).setMinutes(r.getMinutes()+30),t.setCookie("session_key",e.data.payload.session_key,r.toUTCString()),t.setCookie("pathplot_seq",e.data.payload.seq,r.toUTCString()),localStorage.setItem("user_key",e.data.payload.user_key),localStorage.setItem("event_key",e.data.payload.event_key),localStorage.setItem("overflow_flag",e.data.payload.overflow_flag),[2,!0];case 2:return o.sent(),[2,!1];case 3:return[2]}}))}))},e}();t.RawdataScrapper=s},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pageViewEvent=t.getCookie=t.setCookie=void 0;var o=r(n(32));n(49).polyfill();var i="/api";t.setCookie=function(e,t,n){document.cookie=e+"="+t+";expires="+n+";path=/"},t.getCookie=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t&&"undefined"!==t[2]&&"null"!==t[2]?t[2]:null},t.pageViewEvent=function(e,n,r,s){return sessionStorage.setItem("voda_referrer_test",e),sessionStorage.setItem("voda_location_test",n),o.default.create({baseURL:i}).post("/page_view",{session_key:t.getCookie("session_key"),user_key:localStorage.getItem("user_key"),seq:t.getCookie("pathplot_seq"),page_referrer:e,page_location:n,resolution:r,page_name:s},{headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},withCredentials:!1})}},function(e,t,n){e.exports=n(33)},function(e,t,n){"use strict";var r=n(0),o=n(6),i=n(34),s=n(13);function a(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=a(n(9));c.Axios=i,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=n(14),c.CancelToken=n(47),c.isCancel=n(8),c.all=function(e){return Promise.all(e)},c.spread=n(48),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(0),o=n(7),i=n(35),s=n(36),a=n(13);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,o){return this.request(r.merge(o||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,n){"use strict";var r=n(0),o=n(37),i=n(8),s=n(9);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(a(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t,n){var o=n.config.validateStatus;!o||o(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(42),o=n(43);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(14);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){(function(t,r){var o;
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */o=function(){"use strict";function e(e){return"function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,s=void 0,a=void 0,c=function(e,t){g[i]=e,g[i+1]=t,2===(i+=2)&&(a?a(m):w())},u="undefined"!=typeof window?window:void 0,l=u||{},h=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var g=new Array(1e3);function m(){for(var e=0;e<i;e+=2)(0,g[e])(g[e+1]),g[e]=void 0,g[e+1]=void 0;i=0}var _,v,y,b,w=void 0;function S(e,t){var n=arguments,r=this,o=new this.constructor(I);void 0===o[C]&&U(o);var i,s=r._state;return s?(i=n[s-1],c((function(){return D(s,o,i,r._result)}))):H(r,o,e,t),o}function k(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(I);return O(t,e),t}d?w=function(){return t.nextTick(m)}:h?(v=0,y=new h(m),b=document.createTextNode(""),y.observe(b,{characterData:!0}),w=function(){b.data=v=++v%2}):f?((_=new MessageChannel).port1.onmessage=m,w=function(){return _.port2.postMessage(0)}):w=void 0===u?function(){try{var e=n(50);return s=e.runOnLoop||e.runOnContext,function(){s(m)}}catch(e){return p()}}():p();var C=Math.random().toString(36).substring(16);function I(){}var E=new B;function T(e){try{return e.then}catch(e){return E.error=e,E}}function x(t,n,r){n.constructor===t.constructor&&r===S&&n.constructor.resolve===k?function(e,t){1===t._state?A(e,t._result):2===t._state?j(e,t._result):H(t,void 0,(function(t){return O(e,t)}),(function(t){return j(e,t)}))}(t,n):r===E?j(t,E.error):void 0===r?A(t,n):e(r)?function(e,t,n){c((function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?O(e,n):A(e,n))}),(function(t){r||(r=!0,j(e,t))}),e._label);!r&&o&&(r=!0,j(e,o))}),e)}(t,n,r):A(t,n)}function O(e,t){var n;e===t?j(e,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=t)||"object"==typeof n&&null!==n?x(e,t,T(t)):A(e,t)}function N(e){e._onerror&&e._onerror(e._result),R(e)}function A(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&c(R,e))}function j(e,t){void 0===e._state&&(e._state=2,e._result=t,c(N,e))}function H(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+1]=n,o[i+2]=r,0===i&&e._state&&c(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?D(n,r,o,i):o(i);e._subscribers.length=0}}function B(){this.error=null}var P=new B;function D(t,n,r,o){var i=e(r),s=void 0,a=void 0,c=void 0,u=void 0;if(i){if((s=function(e,t){try{return e(t)}catch(e){return P.error=e,P}}(r,o))===P?(u=!0,a=s.error,s=null):c=!0,n===s)return void j(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,c=!0;void 0!==n._state||(i&&c?O(n,s):u?j(n,a):1===t?A(n,s):2===t&&j(n,s))}var M=0;function U(e){e[C]=M++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(I),this.promise[C]||U(this.promise),o(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):j(this.promise,new Error("Array Methods must be provided an Array"))}function V(e){this[C]=M++,this._result=this._state=void 0,this._subscribers=[],I!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof V?function(e,t){try{t((function(t){O(e,t)}),(function(t){j(e,t)}))}catch(t){j(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function F(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=V}return L.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;void 0===this._state&&n<e;n++)this._eachEntry(t[n],n)},L.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===k){var o=T(e);if(o===S&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===V){var i=new n(I);x(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},L.prototype._settledAt=function(e,t,n){var r=this.promise;void 0===r._state&&(this._remaining--,2===e?j(r,n):this._result[t]=n),0===this._remaining&&A(r,this._result)},L.prototype._willSettleAt=function(e,t){var n=this;H(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},V.all=function(e){return new L(this,e).promise},V.race=function(e){var t=this;return o(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},V.resolve=k,V.reject=function(e){var t=new this(I);return j(t,e),t},V._setScheduler=function(e){a=e},V._setAsap=function(e){c=e},V._asap=c,V.prototype={constructor:V,then:S,catch:function(e){return this.then(null,e)}},F(),V.polyfill=F,V.Promise=V,V},e.exports=o()}).call(this,n(10),n(4))},function(e,t){},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RawdataScrapperScroll=void 0;var o=r(n(15)),i=function(){function e(){var t=this;this.findHighestNodeFirst=function(e){for(var n=e.length-1;n>=0;n-=1){var r=e.item(n);if(r.scrollHeight&&r.clientHeight){var o=window.pageYOffset+r.getBoundingClientRect().top,i=Math.max(r.scrollHeight+o,r.clientHeight+o);i>t.pageHeightFirstEnter&&(t.pageHeightFirstEnter=i,t.mainNodeFirstEnter=r)}r.childNodes.length&&t.findHighestNodeFirst(r.childNodes)}},this.findHighestNode=function(e){for(var n=e.length-1;n>=0;n-=1){var r=e.item(n);if(r.scrollHeight&&r.clientHeight){var o=window.pageYOffset+r.getBoundingClientRect().top,i=Math.max(r.scrollHeight+o,r.clientHeight+o);i>t.pageHeight&&(t.pageHeight=i,t.mainNode=r)}r.childNodes.length&&t.findHighestNode(r.childNodes)}},e._instance=this,this.top=0,this.bottom=0,this.isFirstEnterDataSend=!1,this.mainNodeFirstEnter=null,this.mainNode=null,this.pageHeightFirstEnter=0,this.pageHeight=0,this.observeState=!1}return e.prototype.startScroll=function(){var e=this;window.addEventListener("scroll",o.default((function(t){if("target"in t&&t.target)if(t.target===e.mainNode&&"scrollTop"in t.target){var n=t.target,r={top:n.scrollTop,bottom:n.scrollTop+window.innerHeight};e.SocketClientInstance.sendScrollInfo(r)}else if(t.target===window.document){var o=window.document.documentElement.scrollTop;r={top:o,bottom:o+window.innerHeight};e.SocketClientInstance.sendScrollInfo(r)}}),500),{capture:!0})},e.prototype.enterPage=function(){if(window.innerHeight!==document.documentElement.scrollHeight){var e={top:r=window.document.documentElement.scrollTop,bottom:r+window.innerHeight};this.SocketClientInstance.sendScrollInfo(e)}else{var t=document.documentElement.childNodes;if(this.findHighestNodeFirst(t),this.mainNodeFirstEnter){var n=this.mainNodeFirstEnter;if("scrollTop"in n){e={top:n.scrollTop,bottom:n.scrollTop+window.innerHeight};this.SocketClientInstance.sendScrollInfo(e)}else{var r;e={top:r=window.document.documentElement.scrollTop,bottom:r+window.innerHeight};this.SocketClientInstance.sendScrollInfo(e)}}}},e.prototype.generateRawData=function(e){var t=this;this.SocketClientInstance=e,this.enterPage();var n=null;return new PerformanceObserver((function(e){t.observeState=!0,e.getEntries().forEach((function(){n&&clearTimeout(n),n=setTimeout((function(){if(!t.isFirstEnterDataSend){t.isFirstEnterDataSend=!0;var e=document.documentElement.childNodes;if(window.innerHeight!==document.documentElement.scrollHeight){var n=document.documentElement.getBoundingClientRect().height;t.pageHeight=n}else t.findHighestNode(e);t.startScroll()}}),1e3)}))})).observe({entryTypes:["resource"]}),this.observeState||this.startScroll(),!0},e}();t.RawdataScrapperScroll=i},function(e,t,n){"use strict";var r,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClickTouch=void 0;var a=n(53),c=n(54),u=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t&&"undefined"!==t[2]&&"null"!==t[2]?t[2]:null},l=function(e){function t(){var n=e.call(this)||this;return n.enableClickTouch=function(e,t,r,o){n.enableClickEvent(n.getRawData),n.SocketClientInstance=e,n.PageViewInstance=t,n.setIsSendingMessage=r,n.getIsSendingMessage=o},n.getRawData=function(e){return i(n,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),null!==u("session_key")&&void 0!==u("session_key")&&"null"!==u("session_key")&&null!==localStorage.getItem("user_key")&&void 0!==localStorage.getItem("user_key")&&"null"!==localStorage.getItem("user_key")?[3,3]:this.getIsSendingMessage()?[3,2]:(this.setIsSendingMessage(!0),[4,this.PageViewInstance.postAPI(!1,0,!0)]);case 1:t.sent(),this.rawDataScrapper.generateRawData(e,"click",this.SocketClientInstance),t.label=2;case 2:return[3,4];case 3:this.setIsSendingMessage(!1),this.rawDataScrapper.generateRawData(e,"click",this.SocketClientInstance),t.label=4;case 4:return[3,6];case 5:return t.sent(),[3,6];case 6:return[2]}}))}))},t._instance=n,n.rawDataScrapper=new a.RawdataScrapper,n}return o(t,e),t}(c.ClickEvent);t.ClickTouch=l},function(e,t,n){"use strict";var r=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RawdataScrapper=void 0;var i=function(){function e(){e._instance=this}return e.prototype.nthElement=function(e){for(var t=e,n=1;null!==t.previousElementSibling;)t.previousElementSibling.nodeName===e.nodeName&&n++,t=t.previousElementSibling;return n},e.prototype.nthSelectorNeeded=function(e,t){var n=""===t?e:t+" > "+e;try{return document.querySelectorAll(n).length>1}catch(e){}},e.prototype.parentElements=function(e){for(var t=[],n=e;n instanceof HTMLElement;){var r=n.nodeName.toLowerCase(),o=n.id?"#"+n.id:"",i="";n.className&&"string"==typeof n.className&&(i="."+n.className.replace(/\s+/g,".").replace(/[:*+?^${}()|[\]\\]/gi,"\\$&")),t.unshift({element:n,selector:r+o+i}),n=n.parentNode!==document&&n.parentNode}return t},e.prototype.buildPathString=function(e){var t=this,n=[];return e.forEach((function(e){t.nthSelectorNeeded(e.selector,n.join(" > "))&&(e.selector+=":nth-of-type("+t.nthElement(e.element)+")"),n.push(e.selector)})),n.join(" > ")},e.prototype.domElementPath=function(e){if(e instanceof HTMLElement)return this.buildPathString(this.parentElements(e))},e.prototype.getPathTo=function(e){if(""!==e.id)return"id("+e.id+")";if(e===document.body)return e.tagName;for(var t=0,n=e.parentNode.childNodes,r=0;r<n.length;r++){var o=n[r];if(o===e)return this.getPathTo(e.parentNode)+">>"+e.tagName+"["+(t+1)+"]";1===o.nodeType&&o.tagName===e.tagName&&t++}},e.prototype.getElementDimensions=function(e){if(e instanceof SVGElement){var t=e.getBBox();return{width:t.width,height:t.height}}return{width:e.offsetWidth,height:e.offsetHeight}},e.prototype.generateRawData=function(t,n,i){return r(this,void 0,void 0,(function(){var r,s,a,c,u,l,h,d,f,p,g,m;return o(this,(function(o){if("HTML"===(r=t.target).nodeName)return[2,!1];for(s=r,c=r,u=!1,h=0,"BUTTON"!==(a=r).nodeName&&"A"!==a.nodeName&&"INPUT"!==a.nodeName||(u=!0);a.parentNode&&!u;)"BUTTON"!==a.parentNode.nodeName&&"A"!==a.parentNode.nodeName&&"INPUT"!==a.parentNode.nodeName||(u=!0),a=a.parentNode;for(;"parentNode"in c&&null!==c.parentNode.children&&1===c.parentNode.children.length;)c=c.parentNode;s=u?a:c,t.pageX?(l=t.pageX,h=t.pageY):t.clientX&&(d=0,f=0,document.documentElement.scrollLeft?(d=document.documentElement.scrollLeft,f=document.documentElement.scrollTop):document.body&&(d=document.body.scrollLeft,f=document.body.scrollTop),l=t.clientX+d,h=t.clientY+f),p=e._instance.getPathTo(s),g=this.getElementDimensions(s),m={element_x:window.pageXOffset+s.getBoundingClientRect().left,element_y:window.pageYOffset+s.getBoundingClientRect().top,element_width:g.width,element_height:g.height,click_x:l,click_y:h,element_path_id:p,clickable:u,event_status:n};try{return i.sendMouseInfo(m),[2,!0]}catch(e){return[2,!1]}return[2]}))}))},e}();t.RawdataScrapper=i},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClickEvent=void 0;var o=r(n(15)),i=function(){var e=this;this.enableClickEvent=function(t){e.element.addEventListener("click",o.default((function(e){try{t(e)}catch(e){}}),100))},this.element=document.documentElement};t.ClickEvent=i},function(e,t,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SocketClient=void 0;var o=n(57),i="/ws";var s=function(e,t,n){document.cookie=e+"="+t+";expires="+n+";path=/"},a=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t&&"undefined"!==t[2]&&"null"!==t[2]?t[2]:null},c=function(){var e=this;this.socketClient=null,this.initSocketClient=function(){console.log("Init Socket Client"),e.socketClient=new o.Client({brokerURL:i+"/ws",heartbeatIncoming:3e4,heartbeatOutgoing:3e4}),e.socketClient=new o.Client({brokerURL:"https:"===window.location.protocol?"wss://"+window.location.host+"/ws":"ws://"+window.location.host+"/ws",heartbeatIncoming:3e4,heartbeatOutgoing:3e4}),e.socketClient.onConnect=function(){e.isSocketOpen=!0},e.socketClient.onWebSocketClose=function(){e.isSocketOpen=!1},e.socketClient.activate()},this.sendMouseInfo=function(t){var n={action:"click",data:r(r({},t),{session_key:"null"===a("session_key")?null:a("session_key"),user_key:localStorage.getItem("user_key"),page_referrer:sessionStorage.getItem("voda_referrer_test"),page_location:sessionStorage.getItem("voda_location_test"),top:parseInt(localStorage.getItem("voda_top_test"))||0,bottom:parseInt(localStorage.getItem("voda_bottom_test"))||0,event_key:localStorage.getItem("event_key")||"0"})};e.isSocketOpen?localStorage.getItem("user_key")&&"null"===a("session_key")||!a("session_key")||!localStorage.getItem("event_key")||e.socketClient.publish({destination:"click",body:JSON.stringify(n)}):(e.initSocketClient(),e.socketClient.onConnect=function(){e.isSocketOpen=!0,localStorage.getItem("user_key")&&"null"===a("session_key")||!a("session_key")||!localStorage.getItem("event_key")||e.socketClient.publish({destination:"click",body:JSON.stringify(n)})});var o=new Date;o.setMinutes(o.getMinutes()+30),s("session_key",a("session_key"),o.toUTCString()),localStorage.setItem("user_key",localStorage.getItem("user_key"))},this.sendScrollInfo=function(t){localStorage.setItem("voda_top_test",""+t.top),localStorage.setItem("voda_bottom_test",""+t.bottom);var n={action:"scroll",data:r(r({},t),{session_key:"null"===a("session_key")?null:a("session_key"),user_key:localStorage.getItem("user_key"),page_referrer:sessionStorage.getItem("voda_referrer_test"),page_location:sessionStorage.getItem("voda_location_test"),event_key:localStorage.getItem("event_key")||"0"})};e.isSocketOpen?localStorage.getItem("user_key")&&"null"===a("session_key")||!a("session_key")||!localStorage.getItem("event_key")||e.socketClient.publish({destination:"scroll",body:JSON.stringify(n)}):(e.initSocketClient(),e.socketClient.onConnect=function(){e.isSocketOpen=!0,localStorage.getItem("user_key")&&"null"===a("session_key")||!a("session_key")||!localStorage.getItem("event_key")||e.socketClient.publish({destination:"scroll",body:JSON.stringify(n)})});var o=new Date;o.setMinutes(o.getMinutes()+30),s("session_key",a("session_key"),o.toUTCString()),localStorage.setItem("user_key",localStorage.getItem("user_key"))},this.isSocketOpen=!1};t.SocketClient=c},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"v1",(function(){return g})),n.d(t,"v3",(function(){return I})),n.d(t,"v4",(function(){return E})),n.d(t,"v5",(function(){return O})),n.d(t,"NIL",(function(){return N})),n.d(t,"version",(function(){return A})),n.d(t,"validate",(function(){return a})),n.d(t,"stringify",(function(){return d})),n.d(t,"parse",(function(){return m}));var o=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=function(e){return"string"==typeof e&&s.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l,h,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n},f=0,p=0;var g=function(e,t,n){var r=t&&n||0,o=t||new Array(16),s=(e=e||{}).node||l,a=void 0!==e.clockseq?e.clockseq:h;if(null==s||null==a){var c=e.random||(e.rng||i)();null==s&&(s=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==a&&(a=h=16383&(c[6]<<8|c[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:p+1,m=u-f+(g-p)/1e4;if(m<0&&void 0===e.clockseq&&(a=a+1&16383),(m<0||u>f)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=u,p=g,h=a;var _=(1e4*(268435455&(u+=122192928e5))+g)%4294967296;o[r++]=_>>>24&255,o[r++]=_>>>16&255,o[r++]=_>>>8&255,o[r++]=255&_;var v=u/4294967296*1e4&268435455;o[r++]=v>>>8&255,o[r++]=255&v,o[r++]=v>>>24&15|16,o[r++]=v>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var y=0;y<6;++y)o[r+y]=s[y];return t||d(o)};var m=function(e){if(!a(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};var _=function(e,t,n){function r(e,r,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=m(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),(s=n(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,o){i=i||0;for(var a=0;a<16;++a)o[i+a]=s[a];return o}return d(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};function v(e){return 14+(e+64>>>9<<4)+1}function y(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function b(e,t,n,r,o,i){return y((s=y(y(t,e),y(r,i)))<<(a=o)|s>>>32-a,n);var s,a}function w(e,t,n,r,o,i,s){return b(t&n|~t&r,e,t,o,i,s)}function S(e,t,n,r,o,i,s){return b(t&r|n&~r,e,t,o,i,s)}function k(e,t,n,r,o,i,s){return b(t^n^r,e,t,o,i,s)}function C(e,t,n,r,o,i,s){return b(n^(t|~r),e,t,o,i,s)}var I=_("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r=0;r<n;r+=8){var o=e[r>>5]>>>r%32&255,i=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[v(t)-1]=t;for(var n=1732584193,r=-271733879,o=-1732584194,i=271733878,s=0;s<e.length;s+=16){var a=n,c=r,u=o,l=i;n=w(n,r,o,i,e[s],7,-680876936),i=w(i,n,r,o,e[s+1],12,-389564586),o=w(o,i,n,r,e[s+2],17,606105819),r=w(r,o,i,n,e[s+3],22,-1044525330),n=w(n,r,o,i,e[s+4],7,-176418897),i=w(i,n,r,o,e[s+5],12,1200080426),o=w(o,i,n,r,e[s+6],17,-1473231341),r=w(r,o,i,n,e[s+7],22,-45705983),n=w(n,r,o,i,e[s+8],7,1770035416),i=w(i,n,r,o,e[s+9],12,-1958414417),o=w(o,i,n,r,e[s+10],17,-42063),r=w(r,o,i,n,e[s+11],22,-1990404162),n=w(n,r,o,i,e[s+12],7,1804603682),i=w(i,n,r,o,e[s+13],12,-40341101),o=w(o,i,n,r,e[s+14],17,-1502002290),r=w(r,o,i,n,e[s+15],22,1236535329),n=S(n,r,o,i,e[s+1],5,-165796510),i=S(i,n,r,o,e[s+6],9,-1069501632),o=S(o,i,n,r,e[s+11],14,643717713),r=S(r,o,i,n,e[s],20,-373897302),n=S(n,r,o,i,e[s+5],5,-701558691),i=S(i,n,r,o,e[s+10],9,38016083),o=S(o,i,n,r,e[s+15],14,-660478335),r=S(r,o,i,n,e[s+4],20,-405537848),n=S(n,r,o,i,e[s+9],5,568446438),i=S(i,n,r,o,e[s+14],9,-1019803690),o=S(o,i,n,r,e[s+3],14,-187363961),r=S(r,o,i,n,e[s+8],20,1163531501),n=S(n,r,o,i,e[s+13],5,-1444681467),i=S(i,n,r,o,e[s+2],9,-51403784),o=S(o,i,n,r,e[s+7],14,1735328473),r=S(r,o,i,n,e[s+12],20,-1926607734),n=k(n,r,o,i,e[s+5],4,-378558),i=k(i,n,r,o,e[s+8],11,-2022574463),o=k(o,i,n,r,e[s+11],16,1839030562),r=k(r,o,i,n,e[s+14],23,-35309556),n=k(n,r,o,i,e[s+1],4,-1530992060),i=k(i,n,r,o,e[s+4],11,1272893353),o=k(o,i,n,r,e[s+7],16,-155497632),r=k(r,o,i,n,e[s+10],23,-1094730640),n=k(n,r,o,i,e[s+13],4,681279174),i=k(i,n,r,o,e[s],11,-358537222),o=k(o,i,n,r,e[s+3],16,-722521979),r=k(r,o,i,n,e[s+6],23,76029189),n=k(n,r,o,i,e[s+9],4,-640364487),i=k(i,n,r,o,e[s+12],11,-421815835),o=k(o,i,n,r,e[s+15],16,530742520),r=k(r,o,i,n,e[s+2],23,-995338651),n=C(n,r,o,i,e[s],6,-198630844),i=C(i,n,r,o,e[s+7],10,1126891415),o=C(o,i,n,r,e[s+14],15,-1416354905),r=C(r,o,i,n,e[s+5],21,-57434055),n=C(n,r,o,i,e[s+12],6,1700485571),i=C(i,n,r,o,e[s+3],10,-1894986606),o=C(o,i,n,r,e[s+10],15,-1051523),r=C(r,o,i,n,e[s+1],21,-2054922799),n=C(n,r,o,i,e[s+8],6,1873313359),i=C(i,n,r,o,e[s+15],10,-30611744),o=C(o,i,n,r,e[s+6],15,-1560198380),r=C(r,o,i,n,e[s+13],21,1309151649),n=C(n,r,o,i,e[s+4],6,-145523070),i=C(i,n,r,o,e[s+11],10,-1120210379),o=C(o,i,n,r,e[s+2],15,718787259),r=C(r,o,i,n,e[s+9],21,-343485551),n=y(n,a),r=y(r,c),o=y(o,u),i=y(i,l)}return[n,r,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(v(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}));var E=function(e,t,n){var r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return d(r)};function T(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function x(e,t){return e<<t|e>>>32-t}var O=_("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var o=0;o<r.length;++o)e.push(r.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,s=Math.ceil(i/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];a[c]=u}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<s;++h){for(var d=new Uint32Array(80),f=0;f<16;++f)d[f]=a[h][f];for(var p=16;p<80;++p)d[p]=x(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var g=n[0],m=n[1],_=n[2],v=n[3],y=n[4],b=0;b<80;++b){var w=Math.floor(b/20),S=x(g,5)+T(w,m,_,v)+y+t[w]+d[b]>>>0;y=v,v=_,_=x(m,30)>>>0,m=g,g=S}n[0]=n[0]+g>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+_>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),N="00000000-0000-0000-0000-000000000000";var A=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},function(e,t,n){"use strict";n.r(t),n.d(t,"Client",(function(){return d})),n.d(t,"FrameImpl",(function(){return i})),n.d(t,"Parser",(function(){return s})),n.d(t,"StompConfig",(function(){return f})),n.d(t,"StompHeaders",(function(){return p})),n.d(t,"StompSubscription",(function(){return g})),n.d(t,"StompSocketState",(function(){return a})),n.d(t,"ActivationState",(function(){return c})),n.d(t,"Versions",(function(){return u})),n.d(t,"CompatClient",(function(){return _})),n.d(t,"Stomp",(function(){return v}));const r="\n",o="\0";class i{constructor(e){const{command:t,headers:n,body:r,binaryBody:o,escapeHeaderValues:i,skipContentLengthHeader:s}=e;this.command=t,this.headers=Object.assign({},n||{}),o?(this._binaryBody=o,this.isBinaryBody=!0):(this._body=r||"",this.isBinaryBody=!1),this.escapeHeaderValues=i||!1,this.skipContentLengthHeader=s||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body}get binaryBody(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody}static fromRawFrame(e,t){const n={},r=e=>e.replace(/^\s+|\s+$/g,"");for(const o of e.headers.reverse()){o.indexOf(":");const s=r(o[0]);let a=r(o[1]);t&&"CONNECT"!==e.command&&"CONNECTED"!==e.command&&(a=i.hdrValueUnEscape(a)),n[s]=a}return new i({command:e.command,headers:n,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?i.toUnit8Array(e,this._binaryBody).buffer:e+this._body+o}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const t of Object.keys(this.headers||{})){const n=this.headers[t];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?e.push(`${t}:${i.hdrValueEscape(""+n)}`):e.push(`${t}:${n}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push("content-length:"+this.bodyLength()),e.join(r)+r+r}isBodyEmpty(){return 0===this.bodyLength()}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?(new TextEncoder).encode(e).length:0}static toUnit8Array(e,t){const n=(new TextEncoder).encode(e),r=new Uint8Array([0]),o=new Uint8Array(n.length+t.length+r.length);return o.set(n),o.set(t,n.length),o.set(r,n.length+t.length),o}static marshall(e){return new i(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")}}class s{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,t=!1){let n;if(n=e instanceof ArrayBuffer?new Uint8Array(e):this._encoder.encode(e),t&&0!==n[n.length-1]){const e=new Uint8Array(n.length+1);e.set(n,0),e[n.length]=0,n=e}for(let e=0;e<n.length;e++){const t=n[e];this._onByte(t)}}_collectFrame(e){0!==e&&13!==e&&(10!==e?(this._onByte=this._collectCommand,this._reinjectByte(e)):this.onIncomingPing())}_collectCommand(e){if(13!==e)return 10===e?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_collectHeaders(e){13!==e&&(10!==e?(this._onByte=this._collectHeaderKey,this._reinjectByte(e)):this._setupCollectBody())}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(58===e)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(e)}_collectHeaderValue(e){if(13!==e)return 10===e?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_setupCollectBody(){const e=this._results.headers.filter(e=>"content-length"===e[0])[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){0!==e?this._consumeByte(e):this._retrievedBody()}_collectBodyFixedSize(e){0!=this._bodyBytesRemaining--?this._consumeByte(e):this._retrievedBody()}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw(),this.onFrame(this._results),this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var a,c;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(a||(a={})),function(e){e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE"}(c||(c={}));class u{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>`v${e.replace(".","")}.stomp`)}}u.V1_0="1.0",u.V1_1="1.1",u.V1_2="1.2",u.default=new u([u.V1_0,u.V1_1,u.V1_2]);class l{constructor(e,t,n={}){this._client=e,this._webSocket=t,this._serverFrameHandlers={CONNECTED:e=>{this.debug("connected to server "+e.headers.server),this._connected=!0,this._connectedVersion=e.headers.version,this._connectedVersion===u.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(e.headers),this.onConnect(e)},MESSAGE:e=>{const t=e.headers.subscription,n=this._subscriptions[t]||this.onUnhandledMessage,r=e,o=this,i=this._connectedVersion===u.V1_2?r.headers.ack:r.headers["message-id"];r.ack=(e={})=>o.ack(i,t,e),r.nack=(e={})=>o.nack(i,t,e),n(r)},RECEIPT:e=>{const t=this._receiptWatchers[e.headers["receipt-id"]];t?(t(e),delete this._receiptWatchers[e.headers["receipt-id"]]):this.onUnhandledReceipt(e)},ERROR:e=>{this.onStompError(e)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.configure(n)}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}configure(e){Object.assign(this,e)}start(){const e=new s(e=>{const t=i.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug("<<< "+t);(this._serverFrameHandlers[t.command]||this.onUnhandledFrame)(t)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const e=t.data instanceof ArrayBuffer?(new TextDecoder).decode(t.data):t.data;this.debug("<<< "+e)}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._onclose=e=>{this.debug("Connection closed to "+this._client.brokerURL),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onclose=this._onclose,this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{const e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(e){if(e.version!==u.V1_1&&e.version!==u.V1_2)return;if(!e["heart-beat"])return;const[t,n]=e["heart-beat"].split(",").map(e=>parseInt(e,10));if(0!==this.heartbeatOutgoing&&0!==n){const e=Math.max(this.heartbeatOutgoing,n);this.debug(`send PING every ${e}ms`),this._pinger=setInterval(()=>{this._webSocket.readyState===a.OPEN&&(this._webSocket.send(r),this.debug(">>> PING"))},e)}if(0!==this.heartbeatIncoming&&0!==t){const e=Math.max(this.heartbeatIncoming,t);this.debug(`check PONG every ${e}ms`),this._ponger=setInterval(()=>{const t=Date.now()-this._lastServerActivityTS;t>2*e&&(this.debug(`did not receive server activity for the last ${t}ms`),this._closeOrDiscardWebsocket())},e)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this._discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState!==a.CONNECTING&&this._webSocket.readyState!==a.OPEN||this._closeOrDiscardWebsocket())}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}_discardWebsocket(){var e,t;this._webSocket.terminate||(e=this._webSocket,t=e=>this.debug(e),e.terminate=function(){const e=()=>{};this.onerror=e,this.onmessage=e,this.onopen=e;const n=new Date,r=this.onclose;this.onclose=e=>{const r=(new Date).getTime()-n.getTime();t(`Discarded socket closed after ${r}ms, with code/reason: ${e.code}/${e.reason}`)},this.close(),r.call(this,{code:4001,reason:"Heartbeat failure, discarding the socket",wasClean:!1})}),this._webSocket.terminate()}_transmit(e){const{command:t,headers:n,body:r,binaryBody:o,skipContentLengthHeader:s}=e,a=new i({command:t,headers:n,body:r,binaryBody:o,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:s});let c=a.serialize();if(this.logRawCommunication?this.debug(">>> "+c):this.debug(">>> "+a),this.forceBinaryWSFrames&&"string"==typeof c&&(c=(new TextEncoder).encode(c)),"string"==typeof c&&this.splitLargeFrames){let e=c;for(;e.length>0;){const t=e.substring(0,this.maxWebSocketChunkSize);e=e.substring(this.maxWebSocketChunkSize),this._webSocket.send(t),this.debug(`chunk sent = ${t.length}, remaining = ${e.length}`)}}else this._webSocket.send(c)}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt="close-"+this._counter++),this.watchForReceipt(e.receipt,e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug("Ignoring error during disconnect "+e)}else this._webSocket.readyState!==a.CONNECTING&&this._webSocket.readyState!==a.OPEN||this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&clearInterval(this._pinger),this._ponger&&clearInterval(this._ponger)}publish(e){const{destination:t,headers:n,body:r,binaryBody:o,skipContentLengthHeader:i}=e,s=Object.assign({destination:t},n);this._transmit({command:"SEND",headers:s,body:r,binaryBody:o,skipContentLengthHeader:i})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t,n={}){(n=Object.assign({},n)).id||(n.id="sub-"+this._counter++),n.destination=e,this._subscriptions[n.id]=t,this._transmit({command:"SUBSCRIBE",headers:n});const r=this;return{id:n.id,unsubscribe:e=>r.unsubscribe(n.id,e)}}unsubscribe(e,t={}){t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){const t=e||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:t}});const n=this;return{id:t,commit(){n.commit(t)},abort(){n.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t,n={}){n=Object.assign({},n),this._connectedVersion===u.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"ACK",headers:n})}nack(e,t,n={}){return n=Object.assign({},n),this._connectedVersion===u.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"NACK",headers:n})}}var h=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class d{constructor(e={}){this.stompVersions=u.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.state=c.INACTIVE;const t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}get webSocket(){return this._stompHandler?this._stompHandler._webSocket:void 0}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===c.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}configure(e){Object.assign(this,e)}activate(){if(this.state===c.DEACTIVATING)throw this.debug("Still DEACTIVATING, please await call to deactivate before trying to re-activate"),new Error("Still DEACTIVATING, can not activate now");this.active?this.debug("Already ACTIVE, ignoring request to activate"):(this._changeState(c.ACTIVE),this._connect())}_connect(){return h(this,void 0,void 0,(function*(){if(this.connected)return void this.debug("STOMP: already connected, nothing to do");if(yield this.beforeConnect(),!this.active)return void this.debug("Client has been marked inactive, will not attempt to connect");this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new l(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:e=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active)return this.debug("STOMP got connected while deactivate was issued, will disconnect now"),void this._disposeStompHandler();this.onConnect(e)},onDisconnect:e=>{this.onDisconnect(e)},onStompError:e=>{this.onStompError(e)},onWebSocketClose:e=>{this._stompHandler=void 0,this.state===c.DEACTIVATING&&(this._resolveSocketClose(),this._resolveSocketClose=void 0,this._changeState(c.INACTIVE)),this.onWebSocketClose(e),this.active&&this._schedule_reconnect()},onWebSocketError:e=>{this.onWebSocketError(e)},onUnhandledMessage:e=>{this.onUnhandledMessage(e)},onUnhandledReceipt:e=>{this.onUnhandledReceipt(e)},onUnhandledFrame:e=>{this.onUnhandledFrame(e)}}),this._stompHandler.start()}))}_createWebSocket(){let e;return e=this.webSocketFactory?this.webSocketFactory():new WebSocket(this.brokerURL,this.stompVersions.protocolVersions()),e.binaryType="arraybuffer",e}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout(()=>{this._connect()},this.reconnectDelay))}deactivate(){return h(this,void 0,void 0,(function*(){let e;return this.state!==c.ACTIVE?(this.debug(`Already ${c[this.state]}, ignoring call to deactivate`),Promise.resolve()):(this._changeState(c.DEACTIVATING),this._reconnector&&clearTimeout(this._reconnector),this._stompHandler&&this.webSocket.readyState!==a.CLOSED?(e=new Promise((e,t)=>{this._resolveSocketClose=e}),this._disposeStompHandler(),e):(this._changeState(c.INACTIVE),Promise.resolve()))}))}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&(this._stompHandler.dispose(),this._stompHandler=null)}publish(e){this._stompHandler.publish(e)}watchForReceipt(e,t){this._stompHandler.watchForReceipt(e,t)}subscribe(e,t,n={}){return this._stompHandler.subscribe(e,t,n)}unsubscribe(e,t={}){this._stompHandler.unsubscribe(e,t)}begin(e){return this._stompHandler.begin(e)}commit(e){this._stompHandler.commit(e)}abort(e){this._stompHandler.abort(e)}ack(e,t,n={}){this._stompHandler.ack(e,t,n)}nack(e,t,n={}){this._stompHandler.nack(e,t,n)}}class f{}class p{}class g{}class m{constructor(e){this.client=e}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(e){this.client.heartbeatOutgoing=e}get incoming(){return this.client.heartbeatIncoming}set incoming(e){this.client.heartbeatIncoming=e}}class _ extends d{constructor(e){super(),this.maxWebSocketFrameSize=16384,this._heartbeatInfo=new m(this),this.reconnect_delay=0,this.webSocketFactory=e,this.debug=(...e)=>{console.log(...e)}}_parseConnect(...e){let t,n,r,o={};if(e.length<2)throw new Error("Connect requires at least 2 arguments");if("function"==typeof e[1])[o,n,r,t]=e;else switch(e.length){case 6:[o.login,o.passcode,n,r,t,o.host]=e;break;default:[o.login,o.passcode,n,r,t]=e}return[o,n,r,t]}connect(...e){const t=this._parseConnect(...e);t[0]&&(this.connectHeaders=t[0]),t[1]&&(this.onConnect=t[1]),t[2]&&(this.onStompError=t[2]),t[3]&&(this.onWebSocketClose=t[3]),super.activate()}disconnect(e,t={}){e&&(this.onDisconnect=e),this.disconnectHeaders=t,super.deactivate()}send(e,t={},n=""){const r=!1===(t=Object.assign({},t))["content-length"];r&&delete t["content-length"],this.publish({destination:e,headers:t,body:n,skipContentLengthHeader:r})}set reconnect_delay(e){this.reconnectDelay=e}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(e){this.onUnhandledMessage=e}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(e){this.onUnhandledReceipt=e}get heartbeat(){return this._heartbeatInfo}set heartbeat(e){this.heartbeatIncoming=e.incoming,this.heartbeatOutgoing=e.outgoing}}class v{static client(e,t){null==t&&(t=u.default.protocolVersions());return new _(()=>new(v.WebSocketClass||WebSocket)(e,t))}static over(e){let t;return"function"==typeof e?t=e:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),t=()=>e),new _(t)}}v.WebSocketClass=null}])}));